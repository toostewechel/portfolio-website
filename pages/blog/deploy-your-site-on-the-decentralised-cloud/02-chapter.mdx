import TableOfContentSection from "../../../components/toc/TableOfContentSection.tsx";

<TableOfContentSection chapter="chapter-02" topic="Getting Started">

### Getting Started

This post provides a walkthrough of how to deploy a Next.JS site to the decentralised cloud, using my personal portfolio site as an example. It also explains setting up SSL on a custom domain. Before you start, you need at least three things:

- A Digital Wallet and some _$AKT_ tokens for escrow and payments
- A [Docker Hub](https://www.docker.com/) account and a public repository
- A Domain Name

</TableOfContentSection>

<TableOfContentSection chapter="chapter-02" topic="Digital Wallets - Your Keys, Your Data">

### Digital Wallets - Your Keys, Your Data

One of the most famous mantras in the cryptocurrency world is: _"Not your keys, not your crypto"_, which mean that you don't own your coins if you don't have access to the private key associated with it. In most services today, you entrust a third party to safeguard your personal data or funds, which is still the most convenient way and safe path for the average user. However, options for safely managing your private keys that are both safe and easy to use are still emerging.

Nonetheless, for the more tech-savy users, public cryptography offers a paradigm shift in the online management of your accounts and data. After decades of trading trust and convenience to large platforms, users finally have options to regain control over their data with help of so-called digital wallets.

You can think of a digital wallet as a secure digital vault to which only you have the key. Digital wallets are cryptographically secured and use public key cryptography. When setting up your wallet for the first time, you will generate a public key and one 12 or 24-word long and unrecoverable password phrase known as a private key. Together, they are used inside your wallet to encrypt and decrypt data. As the private key is known only to you, you are the only one that can open your vault and control all its contents. However, lose your unique password, and you lose access to everything associated with that private key. This process may seem familiar if you have already used a password manager.

Digital wallets can completely flip the script for interacting with different web applications. Brining your own digital wallet will mean that the user, not the provider, has total control and ownership over what information will be shared and stored. Rather than creating a separate account for each service with your e-mail and password and thus signing over ownership of all data generated to that service, users authenticate themselves with their digital wallets. This creates a really secure and simple unified login experience. To deploy my personal portfolio website I generated a _"Deployment Wallet"_ with the Keplr extension (see [this resource](https://help.keplr.app/articles/installation-guide-for-keplr-extension-for-beginners) for an easy setup guide).

</TableOfContentSection>

<TableOfContentSection chapter="chapter-02" topic="Preparing your Deployment">

### Preparing your Deployment

Before you can make your deployment, you need to do some preparations.

1. Install the [Docker software](https://docs.docker.com/get-docker/) on your local machine. If you are using Visual Studio Code as your IDE, you can also install the Docker extension.

2. Make sure you are in the `app` directory of your NextJS app and build the Docker container with your Docker Hub username. If you are using the latest Apple hardware with the new ARM chips you should also include the necessary platform tag to ensure the docker image will run on the server.

```shell
docker build --platform linux amd64 . -t <docker-username>/<docker-repository-name>:<version>
```

3. Before pushing your Docker image to your public repository, you can run your image locally to test your site and see if everything still works the way it should.

```shell
docker run -p 3000:3000 <docker-username>/<docker-repository-name>:<version-tag>
```

4. Push your container to your public Docker Hub repository using the following command:

```shell
docker push <docker-username>/<docker-repository-name>:<version-tag>
```

</TableOfContentSection>

<TableOfContentSection chapter="chapter-02" topic="Digital Wallets - Your Keys, Your Data">

### Deploying on Akash

You can use the [Akash Console](https://console.akash.network/new-deployment) to easily deploy your site onto the Akash Network in four simple steps. After your deployment is done, the Akash Console provides a dashboard to view the status and details of your deployment. You can perform administrative tasks including closing the deployment, updating the deployment, redeploying, and increasing the funding available to the deployment.

#### Step 1 - Connect your Wallet

Connect your digital wallet to the web application using the _"connect wallet"_ button and follow the steps to create a certificate. You need a valid on-chain certificate to deploy on the Akash Network.

#### Step 2 - Create a New Deployment

Create a new deployment by clicking on the "add" button. You can choose to use a template or upload your own SDL file. The SDL file is a simple `manifest.yaml` file which is a human-readable format in which you specify the details of your deployment such as the name, version and compute resources you need. You can think of it like a recipe that lists all the ingredients and instructions needed to make a dish. If you use a SDL file you should specify your docker image, your domain name and select the amount of compute resources you need to run your site.

```yaml
  version: "2.0"

 services:
   site:
     image: {username}/{image}
     expose:
       - port: 3000
         as: 80
         accept:
           - {your_domain}
         to:
           - global: true

 profiles:
   compute:
     site:
       resources:
         cpu:
           units: 0.5
         memory:
           size: 512Mi
         storage:
           size: 512Mi
   placement:
     site:
       pricing:
         site:
           denom: uakt
           amount: 100

 deployment:
   site:
     site:
       profile: site
       count: 1
```

#### Step 3 - Choose Cloud Provider

Create your deployment and wait for bids to come in. Once you have specified your deployment settings, cloud providers - _ranging from individuals to data centers_ - can bid to host your deployment. Within seconds, you will receive a list of bids from different providers. You can browse through the list and select the provider that best fits your needs, whether it's an enterprise-tier data center or a community-level contributor. Once you've made your choice, the provider will generate a URI endpoint where your site will be visible. After about 30 seconds, your deployment should be ready to go.

#### Step 4 - Add CNAME Record

To complete the process, you need to map the generated URI endpoint to your domain name. This can be achieved by adding a CNAME record in your DNS settings. A CNAME record creates an alias or nickname for a domain, acting as a pointer that redirects traffic from one domain to another.

### Conclusion

That's it. You have successfully deployed your site on a decentralized cloud, enjoying a cost reduction of 10 times compared to traditional cloud providers, all while ensuring the security of your personal information. Although the user interfaces for managing the infrastructure are still in their early stages and some technical knowledge is required, this option holds significant appeal for individuals who prioritise affordability and privacy.

</TableOfContentSection>
